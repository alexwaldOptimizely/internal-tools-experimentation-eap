# ğŸˆ TNF PDF Lineup Agent

**Automated DFS Lineup Builder for Thursday Night Football**

An intelligent Slack bot that analyzes projection PDFs and generates optimal DraftKings Showdown lineups using GPT-4.

## ğŸ“‹ Overview

The TNF PDF Lineup Agent is a modern, reliable solution for DFS lineup optimization that eliminates the complexity and authentication issues of web scraping. Instead, it works seamlessly with PDF uploads to Slack, providing sophisticated lineup analysis powered by AI.

### How It Works
1. **Upload PDF** of projections to your Slack channel
2. **Bot processes** the PDF using GPT-4 Vision to extract player data
3. **AI analyzes** projections and generates 3 optimal lineup strategies
4. **Bot responds** with detailed lineup recommendations

## âœ¨ Key Features

- **ğŸš« No Authentication Issues** - Works with any PDF source
- **ğŸ¤– AI-Powered Analysis** - GPT-4 provides sophisticated lineup optimization
- **ğŸ“± Slack Integration** - Easy to use, just upload and get results
- **âš¡ Fast Processing** - Results in 30-60 seconds
- **ğŸ¯ Multiple Strategies** - Balanced, Contrarian, and Cash game lineups
- **ğŸ“Š Detailed Analysis** - Confidence scores and reasoning for each lineup

## ğŸš€ Quick Start

### 1. Install Dependencies
```bash
npm install
```

### 2. Environment Setup
```bash
# Copy the example file
cp .env-example .env

# Edit .env with your credentials:
OPENAI_API_KEY=sk-your-openai-api-key-here
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token-here
SLACK_SIGNING_SECRET=your-slack-signing-secret-here
ALLOWED_CHANNELS=#dfs-lineups,#thursday-night-football
PORT=3000
```

### 3. Test Core Functionality
```bash
npm run test
```

### 4. Start the Bot
```bash
npm run start
```

## ğŸ“– Detailed Setup Guide

See [SETUP.md](./SETUP.md) for complete instructions including:
- Slack app creation and configuration
- Bot permissions and event subscriptions
- Deployment options (local vs cloud)
- Troubleshooting guide

## ğŸ¯ How to Use

1. **Upload a PDF** containing projection data to your configured Slack channel
2. **Wait for processing** (usually 30-60 seconds)
3. **Receive lineup recommendations** with three different strategies:
   - **BALANCED**: Mix of high-floor and ceiling players
   - **CONTRARIAN**: Lower ownership, higher upside
   - **CASH**: High-floor, safe plays

## ğŸ“„ PDF Format Requirements

Your PDF should contain clear projection data with:
- Player names
- Positions (QB, RB, WR, TE, K, DST)
- Team abbreviations
- Salaries (DraftKings format)
- Projections (fantasy points)
- Optional: Ownership percentages

## ğŸ—ï¸ Architecture

### Core Components
- **Slack Bot** (`src/pdf-lineup-agent.ts`) - Handles PDF uploads and responses
- **GPT-4 Vision** - Extracts projection data from PDFs
- **GPT-4 Analysis** - Generates optimal lineup strategies
- **Express Server** - Handles Slack events and webhooks

### File Structure
```
thursday-agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pdf-lineup-agent.ts    # Main Slack bot
â”‚   â””â”€â”€ test-agent.ts          # Test script
â”œâ”€â”€ .env-example              # Environment template
â”œâ”€â”€ SETUP.md                  # Detailed setup guide
â”œâ”€â”€ package.json
â””â”€â”€ README.md                 # This file
```

## ğŸ”§ Commands

```bash
# Install dependencies
npm install

# Test core functionality (requires OpenAI API key)
npm run test

# Start Slack bot
npm run start

# Start in development mode (auto-restart)
npm run dev
```

## ğŸ“Š Example Output

```
ğŸˆ TNF Lineup Analysis - projections.pdf

1. BALANCED Lineup
ğŸ’° Salary: $49,500 | ğŸ“Š Projection: 125.5 pts | ğŸ¯ Confidence: 8/10

â€¢ Lamar Jackson (QB, BAL) - $9,500 - 24.5 pts
â€¢ Tyreek Hill (WR, MIA) - $9,200 - 20.8 pts
â€¢ Gus Edwards (RB, BAL) - $7,200 - 18.3 pts
â€¢ Mark Andrews (TE, BAL) - $5,800 - 12.5 pts
â€¢ Justin Tucker (K, BAL) - $4,200 - 8.5 pts
â€¢ Ravens DST - $3,800 - 7.8 pts

ğŸ’­ Reasoning: Balanced approach with high-floor QB-WR stack and solid value plays

---

2. CONTRARIAN Lineup
ğŸ’° Salary: $48,900 | ğŸ“Š Projection: 118.2 pts | ğŸ¯ Confidence: 7/10

â€¢ Tua Tagovailoa (QB, MIA) - $8,800 - 22.1 pts
â€¢ Zay Flowers (WR, BAL) - $6,400 - 14.2 pts
â€¢ Raheem Mostert (RB, MIA) - $6,800 - 16.7 pts
â€¢ [Additional players...]

ğŸ’­ Reasoning: Lower ownership pivot with Miami stack and contrarian plays

---

3. CASH Lineup
ğŸ’° Salary: $49,200 | ğŸ“Š Projection: 122.8 pts | ğŸ¯ Confidence: 9/10

â€¢ Lamar Jackson (QB, BAL) - $9,500 - 24.5 pts
â€¢ [High-floor players...]

ğŸ’­ Reasoning: Safe cash game build with high-floor players and minimal risk

ğŸ¤– Generated by TNF Lineup Agent
```

## ğŸ”„ Migration from Web Scraping

The PDF-based system replaces the old web scraping approach, providing:

## ğŸ› ï¸ Development

### Testing
```bash
# Test core lineup generation
npm run test

# Test with mock data
npm run test
```

### Environment Variables
```bash
# Required
OPENAI_API_KEY=sk-your-openai-api-key-here
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token-here
SLACK_SIGNING_SECRET=your-slack-signing-secret-here

# Optional
ALLOWED_CHANNELS=#dfs-lineups,#thursday-night-football
PORT=3000
SLACK_WEBHOOK=https://hooks.slack.com/services/...
```

### Troubleshooting

**Bot not responding:**
- Check Slack app permissions
- Verify Request URL is accessible
- Check server logs for errors

**PDF parsing issues:**
- Ensure PDF contains readable text
- Try different PDF format
- Check OpenAI API key validity

**Permission errors:**
- Verify bot has channel access
- Check OAuth scopes configuration

## ğŸ¯ Benefits of New Architecture

âœ… **No authentication issues** - works with any PDF source  
âœ… **More reliable** - no web scraping failures  
âœ… **Better analysis** - GPT-4 provides sophisticated optimization  
âœ… **Easy to use** - just upload PDF to Slack  
âœ… **Flexible** - works with projections from any site  
âœ… **Scalable** - can handle multiple users/channels  
âœ… **Maintainable** - no complex parsing logic to maintain  

## ğŸ“ˆ Future Enhancements

- **Multiple PDF formats** - Support for different projection sources
- **Advanced correlation** - QB-WR stacks, bringbacks, game theory
- **Ownership integration** - Contrarian lineup optimization
- **Historical analysis** - Track lineup performance over time
- **Custom strategies** - User-defined lineup preferences

## ğŸ‘¥ Contributing

This project is designed to be easily extensible. Key areas for contribution:
- Additional PDF parsing formats
- Enhanced lineup algorithms
- New Slack integrations
- Performance optimizations

## ğŸ“ License

Private project for DFS lineup optimization.

---

**Author:** Alex Wald  
**Maintainer:** Growth Product Manager (DFS + Automation Project)  
**Technical Lead:** Senior Engineer

---

*Ready to optimize your TNF lineups? Just upload a PDF to Slack and let the AI do the work! ğŸš€*
